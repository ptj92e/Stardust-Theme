{"ast":null,"code":"var _jsxFileName = \"C:\\\\xampp\\\\htdocs\\\\stardust\\\\wp-content\\\\themes\\\\stardust-theme\\\\react-src\\\\src\\\\pages\\\\newsletters\\\\newsletters.js\";\nimport React, { useEffect, useState } from 'react';\nimport { pdfjs } from 'pdfjs-dist';\nimport PageFlip from 'react-pageflip';\nimport PageTitle from '../../components/pageTItle/pageTitle';\nimport HTMLService from '../../services/htmlService';\nimport NewslettersService from '../../services/newsletterService';\nimport './newsletters.css';\npdfjs.GlobalWorkerOptions.workerSrc = `https://unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`;\nfunction NewslettersPage() {\n  const [newsletter, setNewsletter] = useState({});\n  const [newsletterList, setNewsletterList] = useState([]);\n  const [pdfUrl, setPdfUrl] = useState('');\n  useEffect(() => {\n    async function getNewsletters() {\n      let response = await NewslettersService.getNewsletters();\n      if (response.length) {\n        setNewsletter(response[0]);\n        setPdfUrl(HTMLService.sanatizeHTML(response[0].content.rendered));\n        if (response.length > 1) {\n          response.shift();\n          setNewsletterList(response);\n        }\n      }\n    }\n    getNewsletters();\n  }, []);\n  const PDFViewer = ({\n    pdfUrl\n  }) => {\n    const [numPages, setNumPages] = useState(null);\n    const [pages, setPages] = useState([]);\n    useEffect(() => {\n      const fetchPDF = async () => {\n        try {\n          const pdfData = await fetch(pdfUrl);\n          console.log(pdfData);\n          const pdfBlob = await pdfData.blob();\n          console.log(pdfBlob);\n          const pdfDocument = await pdfjs.getDocument({\n            data: pdfBlob\n          }).promise;\n          console.log(pdfDocument);\n          setNumPages(pdfDocument.numPages);\n          const pagesArray = Array.from({\n            length: pdfDocument.numPages\n          }, (_, index) => index + 1);\n          setPages(pagesArray);\n        } catch (error) {\n          console.error('Error fetching PDF:', error);\n        }\n      };\n      fetchPDF();\n    }, [pdfUrl]);\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 11\n      }\n    }, pages.map(pageNumber => /*#__PURE__*/React.createElement(\"div\", {\n      key: pageNumber,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(Page, {\n      pageNumber: pageNumber,\n      pdfUrl: pdfUrl,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }\n    }))));\n  };\n  const Page = ({\n    pageNumber,\n    pdfUrl\n  }) => {\n    const [page, setPage] = useState(null);\n    useEffect(() => {\n      const fetchPage = async () => {\n        const pdfData = await fetch(pdfUrl);\n        const pdfBlob = await pdfData.blob();\n        const pdfDocument = await pdfjs.getDocument({\n          data: pdfBlob\n        }).promise;\n        const pdfPage = await pdfDocument.getPage(pageNumber);\n        setPage(pdfPage);\n      };\n      fetchPage();\n    }, [pdfUrl, pageNumber]);\n    if (!page) {\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 18\n        }\n      }, \"Loading...\");\n    }\n    return /*#__PURE__*/React.createElement(\"div\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"img\", {\n      src: page,\n      alt: `Page ${pageNumber}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96,\n        columnNumber: 13\n      }\n    }));\n  };\n  const FlipBook = ({\n    children\n  }) => {\n    return /*#__PURE__*/React.createElement(PageFlip, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 13\n      }\n    }, children);\n  };\n  return /*#__PURE__*/React.createElement(\"div\", {\n    id: \"newsletters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(PageTitle, {\n    image: \"#\",\n    pageTitle: \"Newsletters\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 13\n    }\n  }), /*#__PURE__*/React.createElement(FlipBook, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(PDFViewer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }\n  })));\n}\nexport default NewslettersPage;","map":{"version":3,"names":["React","useEffect","useState","pdfjs","PageFlip","PageTitle","HTMLService","NewslettersService","GlobalWorkerOptions","workerSrc","version","NewslettersPage","newsletter","setNewsletter","newsletterList","setNewsletterList","pdfUrl","setPdfUrl","getNewsletters","response","length","sanatizeHTML","content","rendered","shift","PDFViewer","numPages","setNumPages","pages","setPages","fetchPDF","pdfData","fetch","console","log","pdfBlob","blob","pdfDocument","getDocument","data","promise","pagesArray","Array","from","_","index","error","createElement","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","map","pageNumber","key","Page","page","setPage","fetchPage","pdfPage","getPage","src","alt","FlipBook","children","id","image","pageTitle"],"sources":["C:/xampp/htdocs/stardust/wp-content/themes/stardust-theme/react-src/src/pages/newsletters/newsletters.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { pdfjs } from 'pdfjs-dist';\r\nimport PageFlip from 'react-pageflip';\r\n\r\nimport PageTitle from '../../components/pageTItle/pageTitle';\r\n\r\nimport HTMLService from '../../services/htmlService';\r\nimport NewslettersService from '../../services/newsletterService';\r\n\r\nimport './newsletters.css';\r\n\r\npdfjs.GlobalWorkerOptions.workerSrc = `https://unpkg.com/pdfjs-dist@${pdfjs.version}/build/pdf.worker.min.js`;\r\n\r\nfunction NewslettersPage() {\r\n    const [newsletter, setNewsletter] = useState({});\r\n    const [newsletterList, setNewsletterList] = useState([]);\r\n    const [pdfUrl, setPdfUrl] = useState('');\r\n\r\n    useEffect(() => {\r\n        async function getNewsletters() {\r\n            let response = await NewslettersService.getNewsletters();\r\n\r\n            if (response.length) {\r\n                setNewsletter(response[0]);\r\n                setPdfUrl(HTMLService.sanatizeHTML(response[0].content.rendered));\r\n\r\n                if (response.length > 1) {\r\n                    response.shift();\r\n                    setNewsletterList(response);\r\n                }\r\n            }\r\n        }\r\n\r\n        getNewsletters();\r\n    }, [])\r\n\r\n    const PDFViewer = ({ pdfUrl }) => {\r\n        const [numPages, setNumPages] = useState(null);\r\n        const [pages, setPages] = useState([]);\r\n      \r\n        useEffect(() => {\r\n          const fetchPDF = async () => {\r\n            try {\r\n              const pdfData = await fetch(pdfUrl);\r\n              console.log(pdfData);\r\n              const pdfBlob = await pdfData.blob();\r\n              console.log(pdfBlob);\r\n              const pdfDocument = await pdfjs.getDocument({ data: pdfBlob }).promise;\r\n              console.log(pdfDocument);\r\n      \r\n              setNumPages(pdfDocument.numPages);\r\n              const pagesArray = Array.from({ length: pdfDocument.numPages }, (_, index) => index + 1);\r\n              setPages(pagesArray);\r\n            } catch (error) {\r\n              console.error('Error fetching PDF:', error);\r\n            }\r\n          };\r\n      \r\n          fetchPDF();\r\n        }, [pdfUrl]);\r\n      \r\n        return (\r\n          <div>\r\n            {pages.map((pageNumber) => (\r\n              <div key={pageNumber}>\r\n                <Page pageNumber={pageNumber} pdfUrl={pdfUrl} />\r\n              </div>\r\n            ))}\r\n          </div>\r\n        );\r\n      };\r\n      \r\n      const Page = ({ pageNumber, pdfUrl }) => {\r\n        const [page, setPage] = useState(null);\r\n      \r\n        useEffect(() => {\r\n          const fetchPage = async () => {\r\n            const pdfData = await fetch(pdfUrl);\r\n            const pdfBlob = await pdfData.blob();\r\n            const pdfDocument = await pdfjs.getDocument({ data: pdfBlob }).promise;\r\n            const pdfPage = await pdfDocument.getPage(pageNumber);\r\n      \r\n            setPage(pdfPage);\r\n          };\r\n      \r\n          fetchPage();\r\n        }, [pdfUrl, pageNumber]);\r\n      \r\n        if (!page) {\r\n          return <div>Loading...</div>;\r\n        }\r\n      \r\n        return (\r\n          <div>\r\n            {/* Render PDF page content here */}\r\n            <img src={page} alt={`Page ${pageNumber}`} />\r\n          </div>\r\n        );\r\n      };\r\n\r\n    const FlipBook = ({ children }) => {\r\n        return (\r\n            <PageFlip>\r\n                {children}\r\n            </PageFlip>\r\n        );\r\n    };\r\n\r\n    return (\r\n        <div id='newsletters'>\r\n            <PageTitle\r\n                image=\"#\"\r\n                pageTitle=\"Newsletters\"\r\n            />\r\n            <FlipBook>\r\n                <PDFViewer />\r\n            </FlipBook>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default NewslettersPage;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}